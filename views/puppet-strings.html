<!-- Upper title bar -->
<div class='page-header'>
  <div class='row'>
    <div id='mainTitle' class='col-md-6'><h1>Puppet Strings</h1></div>
  </div>
  <div class='row'>
    <div id='secondaryTitle' class='col-md-12'><p class='lead'>A documentation parser for Puppet extensions written in <span id='rubyTitleText'>Ruby</span>.</p></div>
  </div>
</div>

<div class='page-content'>
<!-- Left side bar -->
  <div class='row'>
    <div id='mainContent' class='col-md-11'><br>
      <p>Very recently, I was assigned to a new engineering team with the objective of enhancing the experience of writing Puppet code. As part of this transition, I inherited the much-beloved puppet-strings project.</p>

      <p>In a nutshell, strings is a YARD-based documentation tool for Puppet code and extensions that are written in either the Puppet language or Ruby. Given some simple in-code comments containing YARD tags, Strings generates consistent HTML or JSON documentation for many Puppet constructs, including:</p>
      <ul>
        <li>Puppet classes, 3.x / 4.x API functions, and Puppet language functions</li>
        <li>Resource types and providers</li>
        <li>Ruby classes and methods</li>
      </ul>

      <div class='col-md-offset-1'>
        <img class='img-responsive projectIntroImg' src='img/strings1.png'>
      </div>

      <h2>Why Document Code?</h2>
      <p>It may sound like a no-brainer, but good documentation is vitally important to the quality and usability of any software. In our case, Puppet Strings serves two user bases: module authors and module consumers. The inline comments allow those actually writing Puppet modules to quickly understand and work with the code, while the ability to generate HTML docs allows module consumers to use the very same documentation as a reference when installing modules into their production environment.</p>

      <p>Strings is also smart enough to detect mismatched types in YARD documentation tags and Puppet function definitions, helping module authors prevent accidental breaking changes to public APIs.</p>

      <h2>What Does This All Actually Look Like?</h2>
      <p>I like to illustrate the usage of Strings with a very simple example:</p>
      <pre class='prettyprint'>
  # An example function written in Puppet.
  # @param name the name to say hello to.
  # @return [String] Returns a string.
  # @example Calling the function
  #    example(‘world’)
  function example(String $name) {
      “hello, $name”
  }
      </pre>

    <p>By using basic YARD tags like `@param` and `@return`, we can fully document the specification of a function right where the code lives, preventing the docs from getting stale and out of date.


      <h2>The Great Puppet Strings 1.0 Effort</h2>
      <p>For about a year before I inherited Strings, the project was largely unmaintained due to a lack of prioritization. It had fallen behind Puppet itself and was no longer correctly producing documentation. Luckily, one of our senior engineers decided to work on a complete rewrite of the project to bring it back to life. Once this was done, it became my task to carry the project the rest of the way to a 1.0.0 release.</p>

      <p>With this objective in mind, I set out in an effort to learn the codebase inside and out and determine what still needed to be done. Although the rewrite was complete, there were still quite a few issues and absent requirements that I discovered while interviewing our initial consumers of the project: the Puppet docs team and several members of the open-source community.</p>

      <p>Given this feedback, it was clear that we were not quite ready for a major 1.0 release. Instead, we decided to immediately release version 0.99.0 with the fixes that had been made to signify an imminent 1.0 release. This allowed early adopters to try out the new features in production and also gave me a chance to make necessary breaking changes to the JSON API without violating semantic versioning.</p>

      <p>A few months and dozens of fixes later and Strings 1.0.0 was released into the wild! To help drive knowledge and adoption of strings as a best practice for documenting Puppet code, I published this <a href='https://puppet.com/blog/using-puppet-strings-generate-great-documentation-puppet-modules'>blog post on the official Puppet Blog</a> to help newcomers get started.</p>

      <ul>
        <li><a href='https://github.com/puppetlabs/puppet-strings'>Puppet Strings</a> on GitHub</li>
        <li><a href='https://rubygems.org/gems/puppet-strings'>Puppet Strings Gem</a> on Rubygems.org</li>
      </ul>
    </div>
  </div>
</div>
