<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <title>D3.js Barcamp Talk</title>
    <link rel='stylesheet' media='screen' href='style.css'>
    <script type='text/javascript' src='d3/d3.js'></script>
  </head>
  <body>
    <div id='cityGraphTitle'>
      Audience Members by City
    </div>
    <div id='cityGraphContainer'>
      <script type='text/javascript'>
        /* Lesson 1: Generating new DOM elements on the fly */
          // d3.select("body").append("p").text("A brandA brand new paragraphh!");


        /* Lesson 2: Binding data and Lesson 3: applying style */
        /*
        var dataset = [ 5, 10, 15, 20, 25 ];

        d3.select("body").selectAll("p")
          .data(dataset)
          .enter()
          .append("p")
          .text(function(d) { return "My value is " + d; })
          .style("color", function(d) {
            if (d > 15) {
              return "red";
            } else {
              return "green";
            }
          });
        */

        /* Lesson 4: Making bars!  */
        /*
        var dataset = [];
        for (var i = 0; i < 25; i++) {
          var newNumber = Math.random() * 30; dataset.push(newNumber);
        }

        d3.select("body").selectAll("div")
          .data(dataset)
          .enter()
          .append("div")
          .attr("class", "bar")
          .style("height", function(d) {
            return d * 5 + "px";
          });
        */

        /* Lesson 5: Histogram and SVG */
        var dataset = [];
        for (var i = 0; i < 25; i++) {
          var newNumber = Math.random() * 30; dataset.push(newNumber);
        }

        var w = 500;
        var h = 200;
        var barPadding = 1; // <-- New!

         //Create SVG element
        var svg = d3.select("body") .append("svg")
                .attr("width", w)
                .attr("height", h);

        svg.selectAll("rect")
          .data(dataset)
          .enter()
          .append("rect")
          .attr("x", function(d, i) {
            return i * (w / dataset.length);
          })
          .attr("y", function(d) {
            return h - (d * 4); //Height minus data value
          })
          //.attr("width", 20)
          .attr("width", w / dataset.length - barPadding)
          .attr("height", function(d) {
            return d * 4; //Just the data value
          })
          .attr("fill", function(d) {
              if (d > 25) {
                return 'red';
              } else {
                return 'teal';
              }
          });

      </script>
    </div>
  </body>
</html>
